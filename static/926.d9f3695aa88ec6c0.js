"use strict";(self.webpackChunkwebpage=self.webpackChunkwebpage||[]).push([[926],{1926:(q,u,a)=>{a.r(u),a.d(u,{CreateBookModule:()=>N});var m=a(6895),c=a(6850),l=a(433),d=a(3196),e=a(8256),k=a(2817);function _(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," please kindly fill field "),e.qZA())}function g(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,_,2,0,"span",6),e.qZA()),2&t){const r=e.oxw(2);let o;e.xp6(1),e.Q6J("ngIf",null==(o=r.createBookForm.get("title"))||null==o.errors?null:o.errors.required)}}function B(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,g,2,1,"span",6),e.qZA()),2&t){const r=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",(null==(o=r.createBookForm.get("title"))?null:o.invalid)&&(null==(o=r.createBookForm.get("title"))?null:o.touched)||(null==(o=r.createBookForm.get("title"))?null:o.dirty))}}function h(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," please kindly fill field "),e.qZA())}function C(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,h,2,0,"span",6),e.qZA()),2&t){const r=e.oxw(2);let o;e.xp6(1),e.Q6J("ngIf",null==(o=r.createBookForm.get("description"))||null==o.errors?null:o.errors.required)}}function Z(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,C,2,1,"span",6),e.qZA()),2&t){const r=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",(null==(o=r.createBookForm.get("description"))?null:o.invalid)&&(null==(o=r.createBookForm.get("description"))?null:o.touched)||(null==(o=r.createBookForm.get("description"))?null:o.dirty))}}function F(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," please kindly fill field "),e.qZA())}function x(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,F,2,0,"span",6),e.qZA()),2&t){const r=e.oxw(2);let o;e.xp6(1),e.Q6J("ngIf",null==r.createBookForm||null==(o=r.createBookForm.get("price"))||null==o.errors?null:o.errors.required)}}function T(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,x,2,1,"span",6),e.qZA()),2&t){const r=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",(null==r.createBookForm||null==(o=r.createBookForm.get("price"))?null:o.invalid)&&(null==r.createBookForm||null==(o=r.createBookForm.get("price"))?null:o.touched)||(null==r.createBookForm||null==(o=r.createBookForm.get("price"))?null:o.dirty))}}function b(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," please kindly fill field "),e.qZA())}function I(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,b,2,0,"span",6),e.qZA()),2&t){const r=e.oxw(2);let o;e.xp6(1),e.Q6J("ngIf",null==(o=r.createBookForm.get("author"))||null==o.errors?null:o.errors.invalid)}}function y(t,n){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,I,2,1,"span",6),e.qZA()),2&t){const r=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",(null==(o=r.createBookForm.get("author"))?null:o.invalid)&&(null==(o=r.createBookForm.get("author"))?null:o.touched)||(null==(o=r.createBookForm.get("author"))?null:o.dirty))}}const A=[{path:"",component:(()=>{class t{constructor(r,o,i,s){this.formBulder=r,this.booksService=o,this.router=i,this.activatedRoute=s,this.fileNames=[""],this.activatedRoute.queryParams.subscribe(p=>{this.selectedBookId=p.bId})}ngOnInit(){this.generateCreatebookForm(),this.getBookDetailsById()}generateCreatebookForm(){this.createBookForm=this.formBulder.group({title:["",[l.kI.required]],description:["",[l.kI.maxLength(10),l.kI.minLength(3),l.kI.required]],images:[null,[l.kI.required]],price:["",[l.kI.required]],author:["",[l.kI.required]]})}onSubmit(){if(this.selectedBookId){const r={...this.createBookForm.value,images:this.fileNames,userAttributes:{}};this.booksService.updateBookDetails(this.selectedBookId,r).subscribe(o=>{this.router.navigate([d.p.BOOKS_LIST])})}else{const r={...this.createBookForm.value,images:this.fileNames};this.booksService.postBooks(r).subscribe(o=>{this.router.navigate([d.p.BOOKS_LIST]),this.createBookForm.reset()})}}onFileSelect(r){r.target.files&&r.target.files.length&&(this.fileNames=Array.from(r.target.files).map(o=>o.name),console.log(this.fileNames))}getBookDetailsById(){this.booksService.getBookDetailsById(this.selectedBookId).subscribe(r=>{this.selectedBookDetails=r.data,this.createBookForm.controls.title.setValue(this.selectedBookDetails.title),this.createBookForm.controls.description.setValue(this.selectedBookDetails.description),this.createBookForm.controls.price.setValue(this.selectedBookDetails.price),this.createBookForm.controls.author.setValue(this.selectedBookDetails.author)})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(l.qu),e.Y36(k.y),e.Y36(c.F0),e.Y36(c.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-book"]],decls:30,vars:5,consts:[[1,"page"],[1,"container","my-4"],[3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title","placeholder","Enter title Name",1,"form-control"],[4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description","placeholder","Enter book description",1,"form-control"],[1,"col-12","mb-3","form-group"],["type","file","id","image","formControlName","images","multiple","",1,"form-control",3,"change"],["for","price",1,"form-label"],["type","text","formControlName","price","id","price","placeholder","Enter price",1,"form-control"],["for","author",1,"form-label"],["type","text","formControlName","author","id","author","placeholder","Enter Author Name ",1,"form-control"],["type","submit",1,"col-12","mb-3","btn","btn-primary","center"]],template:function(r,o){if(1&r&&(e.TgZ(0,"h2"),e._uU(1,"Create Book"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"form",2),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(5,"div",3)(6,"label",4),e._uU(7,"Title"),e.qZA(),e._UZ(8,"input",5),e.YNc(9,B,2,1,"span",6),e.qZA(),e.TgZ(10,"div",3)(11,"label",7),e._uU(12,"Book Description"),e.qZA(),e._UZ(13,"textarea",8),e.YNc(14,Z,2,1,"span",6),e.qZA(),e.TgZ(15,"div",9)(16,"input",10),e.NdJ("change",function(s){return o.onFileSelect(s)}),e.qZA()(),e.TgZ(17,"div",3)(18,"label",11),e._uU(19,"price"),e.qZA(),e._UZ(20,"input",12),e.YNc(21,T,2,1,"span",6),e.qZA(),e.TgZ(22,"div",3)(23,"label",13),e._uU(24," Author Name "),e.qZA(),e._UZ(25,"input",14),e.YNc(26,y,2,1,"span",6),e.qZA(),e.TgZ(27,"div",3)(28,"button",15),e._uU(29," Add Book "),e.qZA()()()()()),2&r){let i,s,p,f;e.xp6(4),e.Q6J("formGroup",o.createBookForm),e.xp6(5),e.Q6J("ngIf",null==(i=o.createBookForm.get("title"))?null:i.errors),e.xp6(5),e.Q6J("ngIf",null==(s=o.createBookForm.get("description"))?null:s.errors),e.xp6(7),e.Q6J("ngIf",null==o.createBookForm||null==(p=o.createBookForm.get("price"))?null:p.errors),e.xp6(5),e.Q6J("ngIf",null==(f=o.createBookForm.get("author"))?null:f.errors)}},dependencies:[m.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(A),c.Bz]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,v,l.u5,l.UX]}),t})()}}]);